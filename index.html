<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Strategic card game where you predict if the next card will be higher or lower. Features 5 game modes: Classic, Infinite, Panic, No Mercy, and 2-Player Battle Royale with lives system.">
    <title>Beat the Deck Pro - Higher Lower Card Game</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="assets/css/features/high-contrast.css">
    <link rel="stylesheet" href="assets/css/features/two-player.css">
    <link rel="stylesheet" href="assets/css/features/battle-royale.css">
    <link rel="stylesheet" href="pwa-fixes.css">
    <script src="https://cdn.jsdelivr.net/npm/js-confetti@latest/dist/js-confetti.browser.js"></script>
    
    <!-- PWA Meta Tags -->
    <meta name="application-name" content="Beat the Deck Pro">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Beat Deck">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="msapplication-config" content="/favicon/browserconfig.xml">
    <meta name="msapplication-TileColor" content="#16213e">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="theme-color" content="#16213e">
    
    <!-- Git Hash Meta Tag för Automatisk Versionhantering -->
    <meta name="git-hash" content="cd2504d">
    
    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="favicon/site.webmanifest">
    <link rel="shortcut icon" href="favicon/favicon.ico">
    
    <!-- iOS Icons -->
    <link rel="apple-touch-icon" href="/favicon/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/favicon/apple-touch-icon.png">
    
    <!-- Android Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/favicon/android-chrome-512x512.png">

</head>
<body>
<!-- partial:index.partial.html -->
<!-- Panic Mode Timer Bar -->
<div class="speed-timer-bar" id="speedTimerBar"></div>

<!-- Tutorial Backdrop -->
<div class="tutorial-backdrop" id="tutorialBackdrop" style="display: none;"></div>

<!-- Tutorial Overlay Elements -->
<div id="tutorialOverlayElements" style="display: none;">
  <!-- Duplicated Card for highlighting -->
  <div class="card red tutorial-overlay-card" id="tutorialOverlayCard" style="position: fixed; z-index: 600;">
    <div class="top-left">7♥</div>
    <div class="bottom-right">7♥</div>
    <div class="buttons" id="tutorialOverlayButtons">
      <button class="up">▲</button>
      <button class="down">▼</button>
    </div>
  </div>
  
  <!-- Duplicated Score for highlighting -->
  <div id="tutorialOverlayScore" style="position: fixed; z-index: 600; font-weight: 700; font-size: 1.2rem;">
    <span style="color: #f5f5dc;">Score:</span> <span style="color: gold; font-size: 1.5rem;">0</span>
  </div>
  
  <!-- Duplicated Settings Button for highlighting -->
  <button id="tutorialOverlaySettings" style="position: fixed; z-index: 600;">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
      <circle cx="12" cy="12" r="3"></circle>
    </svg>
  </button>
</div>

<!-- Dynamic Tutorial Popup -->
<div class="tutorial-popup top-left" id="tutorialPopup" style="display: none;">
  <div class="tutorial-step-counter">Step <span id="currentStep">1</span> of 6</div>
  <h3 id="tutorialTitle">Welcome!</h3>
  <p id="tutorialText">This is a tutorial that will teach you how to play. Your goal is to predict if the next card will be Higher or Lower.</p>
  <div class="tutorial-popup-buttons">
    <button class="tutorial-btn back" onclick="previousTutorialStep()" id="backBtn" style="display: none;">Back</button>
    <button class="tutorial-btn" onclick="nextTutorialStep()" id="nextBtn">Next</button>
  </div>
</div>

<!-- Dynamic Tutorial Arrow -->
<div class="tutorial-arrow" id="tutorialArrow" style="display: none;">
  <div style="width: 0; height: 0; border-left: 18px solid transparent; border-right: 18px solid transparent; border-top: 22px solid #FFD700;"></div>
</div>

<div id="gameWrapper">
  <div id="scoreboard">
    <div id="score"><span class="label">Score:</span> <span class="value">0</span></div>
    <div id="deckCounter"><span class="label">Cards left:</span> <span class="value">0</span></div>
    <div id="timer"><span class="label">Time</span> <span class="value">00:00</span></div>
    <div id="gameMode"><span class="label">Game mode:</span> <span class="value">Classic</span></div>
  </div>
  
  <!-- Battle Royale Scoreboard -->
  <div id="battleRoyaleScoreboard" style="display:none;">
    <div class="player-section player-1">
      <div class="player-name" id="br-player1-name">Player 1</div>
      <div class="player-lives" id="player1Lives">♥ ♥ ♥</div>
    </div>
    <div class="player-section player-2">
      <div class="player-name" id="br-player2-name">Player 2</div>
      <div class="player-lives" id="player2Lives">♥ ♥ ♥</div>
    </div>
  </div>
  <div id="cardGrid"></div>
  <div id="playerIndicator" style="display: none;">
    <span id="currentPlayerText">Player 1</span>
  </div>
</div>

<div id="gameControls">
  <button id="settingsButton" aria-label="Settings">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
      <circle cx="12" cy="12" r="3"></circle>
    </svg>
  </button>
  <button id="twoPlayerButton" aria-label="2 Player Mode" style="display: none;">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
      <circle cx="9" cy="7" r="4"/>
      <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
      <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
    </svg>
  </button>
  <button id="showAllButtons" aria-label="Show all buttons"><span>↨</span></button>
  <button id="darkModeButton" aria-label="Toggle Dark Mode">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 12.79A9 9 0 1 1 11.21 3A7 7 0 0 0 21 12.79z"></path>
    </svg>
  </button>
  <button id="restartButton" aria-label="Restart game">↻</button>
</div>

<!-- Game Over Overlay -->
<div id="gameOverOverlay" style="display:none;">
  <div class="overlayContent game-over-content">
    <button id="closeOverlayBtn" aria-label="Close game overlay">×</button>
    <h2 id="gameOverTitleText"></h2>
    <p class="overlaySubtitle" id="gameOverSubtitleText"></p>
    <div class="overlay-stats">
      <p class="overlayScore">Score: <span id="gameOverScoreValue">0</span></p>
      <p class="overlayTime">Time: <span id="gameOverTimeValue">00:00</span></p>
    </div>
    <div class="overlay-buttons">
      <button id="playAgainBtn">
        <svg class="button-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
          <path d="M21 3v5h-5"/>
          <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
          <path d="M3 21v-5h5"/>
        </svg>
        Retry
      </button>
      <button id="highscoreBtn">
        <svg class="button-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
          <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
          <path d="M4 22h16"></path>
          <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
          <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
          <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
        </svg>
        Highscore
      </button>
    </div>
  </div>
</div>

<!-- Info Overlay -->
<div id="infoOverlay" style="display:none;">
  <div class="overlayContent">
    <button id="closeInfoOverlayBtn" aria-label="Stäng info">×</button>
    <h2 class="overlayTitle">Settings</h2>
    
    <div class="preferences-section">
      <div class="preferences-list">
        <div class="preference-item">
          <div class="preference-info">
            <span class="preference-name">Always use Lazy Mode</span>
            <span class="preference-desc">Auto-enable lazy mode when starting games</span>
          </div>
          <div class="toggle-switch">
            <input type="checkbox" id="lazyModeToggle" class="toggle-input">
            <label for="lazyModeToggle" class="toggle-label"></label>
          </div>
        </div>
        <div class="preference-item">
          <div class="preference-info">
            <span class="preference-name">Auto Dark Mode</span>
            <span class="preference-desc">Remember and auto-enable dark mode</span>
          </div>
          <div class="toggle-switch">
            <input type="checkbox" id="darkModeToggle" class="toggle-input">
            <label for="darkModeToggle" class="toggle-label"></label>
          </div>
        </div>
        <div class="preference-item">
          <div class="preference-info">
            <span class="preference-name">High Contrast Mode</span>
            <span class="preference-desc">Enhanced contrast and color-blind friendly design</span>
          </div>
          <div class="toggle-switch">
            <input type="checkbox" id="highContrastToggle" class="toggle-input">
            <label for="highContrastToggle" class="toggle-label"></label>
          </div>
        </div>
        <div class="preference-item">
          <div class="preference-info">
            <span class="preference-name">Vibration</span>
            <span class="preference-desc">Vibrate on wrong guesses (mobile)</span>
          </div>
          <div class="toggle-switch">
            <input type="checkbox" id="vibrationToggle" class="toggle-input">
            <label for="vibrationToggle" class="toggle-label"></label>
          </div>
        </div>
        <div class="preference-item">
          <div class="preference-info">
            <span class="preference-name">Show 2 Player Button</span>
            <span class="preference-desc">Display 2-player mode button on main screen</span>
          </div>
          <div class="toggle-switch">
            <input type="checkbox" id="twoPlayerToggle" class="toggle-input">
            <label for="twoPlayerToggle" class="toggle-label"></label>
          </div>
        </div>
        <div class="preference-item">
          <div class="preference-info">
            <span class="preference-name">Panic Timer</span>
            <span class="preference-desc">Time limit in seconds</span>
          </div>
          <div class="dropdown-switch">
            <select id="panicTimerSelect" class="dropdown-select">
              <option value="6">6s</option>
              <option value="10">10s</option>
              <option value="12" selected>12s</option>
              <option value="15">15s</option>
              <option value="20">20s</option>
            </select>
          </div>
        </div>
      </div>
      
      <div class="reset-buttons">
        <button class="reset-btn" id="gameModesBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
            <line x1="8" y1="21" x2="16" y2="21"></line>
            <line x1="12" y1="17" x2="12" y2="21"></line>
          </svg>
          Game modes
        </button>
        <button class="reset-btn" id="resetHighscoresBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
            <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
            <path d="M4 22h16"></path>
            <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
            <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
            <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
          </svg>
          Reset all highscores
        </button>
        <button class="reset-btn" id="resetStatisticsBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 3v18h18"></path>
            <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"></path>
          </svg>
          Reset all statistics
        </button>
        <button class="reset-btn" id="deleteAllDataBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="3,6 5,6 21,6"></polyline>
            <path d="m19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"></path>
            <line x1="10" y1="11" x2="10" y2="17"></line>
            <line x1="14" y1="11" x2="14" y2="17"></line>
          </svg>
          Reset all data
        </button>
      </div>
    </div>
    
    <div class="info-content">
      <p>Beat the Deck is completely free to play with no ads, no microtransactions, and no pay-to-win mechanics. All features and game modes are unlocked from the start.</p>
      <p>This game respects your privacy - no data collection. Just pure, uninterrupted card gaming fun.</p>
      <p class="copyright-text" style="text-align: center;">
        © 2025 Adam Arvidsson
      </p>
    </div>
  </div>
</div>

<!-- Game Modes Info Overlay -->
<div id="gameModesOverlay" style="display:none;">
  <div class="overlayContent">
    <button id="closeGameModesBtn" aria-label="Close game modes info">×</button>
    
    <div class="game-mode-info-section">
      <div class="game-mode-info-header">
        <h3 class="mode-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mode-icon">
            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
            <line x1="8" y1="21" x2="16" y2="21"></line>
            <line x1="12" y1="17" x2="12" y2="21"></line>
          </svg>
          Classic
        </h3>
        <div class="game-mode-actions">
          <button class="game-mode-icon-btn play-icon-btn" id="classicInfoPlayIcon" aria-label="Play Classic">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="5,3 19,12 5,21"></polygon>
            </svg>
          </button>
          <button class="game-mode-icon-btn trophy-icon-btn" id="classicInfoTrophyIcon" aria-label="Classic Highscore">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
              <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
              <path d="M4 22h16"></path>
              <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
              <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
              <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
          </button>
        </div>
      </div>
      <p>Standard 52-card deck that runs out. Win by clearing all cards or lose when all piles are lost. Strategy matters - plan your moves carefully to maximize your chances.</p>
      <div class="mode-stats-explanation">
        <p><strong>Wins:</strong> Number of games where you successfully cleared the entire deck or survived until no cards remained.</p>
        <p><strong>Win Rate:</strong> Percentage of completed games that resulted in victory - shows your overall success rate in Classic mode.</p>
      </div>
    </div>
    
    <div class="game-mode-info-section">
      <div class="game-mode-info-header">
        <h3 class="mode-title">
          <span class="mode-icon-text">∞</span>
          Infinite
        </h3>
        <div class="game-mode-actions">
          <button class="game-mode-icon-btn play-icon-btn" id="infiniteInfoPlayIcon" aria-label="Play Infinite">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="5,3 19,12 5,21"></polygon>
            </svg>
          </button>
          <button class="game-mode-icon-btn trophy-icon-btn" id="infiniteInfoTrophyIcon" aria-label="Infinite Highscore">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
              <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
              <path d="M4 22h16"></path>
              <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
              <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
              <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
          </button>
        </div>
      </div>
      <p>Unlimited cards - the deck never runs out. Focus on building the highest score possible without worrying about running out of cards. Perfect for practicing and long sessions.</p>
      <div class="mode-stats-explanation">
        <p><strong>43+ Games:</strong> Number of games where you scored 43 points or higher - considered excellent performance in Infinite mode.</p>
        <p><strong>Longest Run:</strong> Your highest consecutive correct guesses in a single game before losing a pile.</p>
        <p><strong>Structured Decks:</strong> Each deck contains exactly 52 unique cards before a new shuffled deck begins.</p>
      </div>
    </div>
    
    <div class="game-mode-info-section">
      <div class="game-mode-info-header">
        <h3 class="mode-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mode-icon">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12,6 12,12 16,14"></polyline>
          </svg>
          Panic
        </h3>
        <div class="game-mode-actions">
          <button class="game-mode-icon-btn play-icon-btn" id="speedInfoPlayIcon" aria-label="Play Panic">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="5,3 19,12 5,21"></polygon>
            </svg>
          </button>
          <button class="game-mode-icon-btn trophy-icon-btn" id="speedInfoTrophyIcon" aria-label="Panic Highscore">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
              <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
              <path d="M4 22h16"></path>
              <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
              <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
              <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
          </button>
        </div>
      </div>
      <p>Race against time - score as many points as possible before time runs out. All buttons are visible for fast gameplay. Quick decisions and rapid clicking required! Timer can be adjusted in Settings.</p>
      <div class="mode-stats-explanation">
        <p><strong>Score/s:</strong> Your average points scored per second - measures your efficiency and speed in making correct decisions.</p>
        <p><strong>Misses/s:</strong> Your average incorrect guesses per second - tracks your error rate to help improve accuracy under pressure.</p>
      </div>
    </div>
    
    <div class="game-mode-info-section">
      <div class="game-mode-info-header">
        <h3 class="mode-title">
          <span class="mode-icon-text">💀</span>
          No Mercy
        </h3>
        <div class="game-mode-actions">
          <button class="game-mode-icon-btn play-icon-btn" id="noMercyInfoPlayIcon" aria-label="Play No Mercy">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="5,3 19,12 5,21"></polygon>
            </svg>
          </button>
          <button class="game-mode-icon-btn trophy-icon-btn" id="noMercyInfoTrophyIcon" aria-label="No Mercy Highscore">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
              <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
              <path d="M4 22h16"></path>
              <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
              <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
              <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
          </button>
        </div>
      </div>
      <p>One mistake ends the game immediately. High risk, high reward gameplay where perfect execution is required. Only for the most skilled and confident players.</p>
      <div class="mode-stats-explanation">
        <p><strong>10+ Games:</strong> Number of games where you scored 10 points or higher - a significant achievement requiring perfect precision.</p>
        <p><strong>Quick Deaths:</strong> Games that ended with 0 points due to first-guess mistakes - tracks early failures for improvement.</p>
        <p><strong>Structured Decks:</strong> Each deck contains exactly 52 unique cards before a new shuffled deck begins.</p>
      </div>
    </div>
    
    <div class="game-mode-info-section">
      <div class="game-mode-info-header">
        <h3 class="mode-title">
          <span class="mode-icon-text">⚔️</span>
          Battle Royale
        </h3>
        <div class="game-mode-actions">
          <button class="game-mode-icon-btn play-icon-btn" id="battleRoyaleInfoPlayIcon" aria-label="Play Battle Royale">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="5,3 19,12 5,21"></polygon>
            </svg>
          </button>
        </div>
      </div>
      <p>Two players, three lives each. Take turns playing the same deck - every wrong guess costs you a life, but correct guesses can win lives back! Fight until only one player remains standing.</p>
      
      <!-- Strategy Examples for Battle Royale -->
      <div class="card-strategies">
        <div class="strategy-item">
          <div class="strategy-header-row">
            <div class="strategy-cards">
              <div class="strategy-card red">J♥</div>
              <div class="strategy-card">Q♠</div>
              <div class="strategy-card red">K♦</div>
            </div>
            <div class="strategy-plus">+</div>
            <div class="strategy-action">
              Higher 
              <span class="arrow-up">
                <svg viewBox="0 0 24 24">
                  <polygon points="12,6 18,18 6,18"/>
                </svg>
              </span>
            </div>
            <div class="strategy-result">= <span class="heart">♥</span> +1</div>
          </div>
        </div>
        
        <div class="strategy-item">
          <div class="strategy-header-row">
            <div class="strategy-cards">
              <div class="strategy-card">3♠</div>
              <div class="strategy-card red">4♦</div>
              <div class="strategy-card">5♣</div>
            </div>
            <div class="strategy-plus">+</div>
            <div class="strategy-action">
              Lower 
              <span class="arrow-down">
                <svg viewBox="0 0 24 24">
                  <polygon points="6,6 18,6 12,18"/>
                </svg>
              </span>
            </div>
            <div class="strategy-result">= <span class="heart">♥</span> +1</div>
          </div>
        </div>
        
        <div class="strategy-item">
          <div class="strategy-header-row">
            <div class="strategy-cards">
              <div class="strategy-card">8♠</div>
            </div>
            <div class="strategy-plus">=</div>
            <div class="strategy-cards">
              <div class="strategy-card red">8♦</div>
            </div>
            <div class="strategy-action">Equal</div>
            <div class="strategy-result">= <span class="heart">♥</span> +1</div>
          </div>
        </div>
      </div>
      
      <div class="mode-stats-explanation">
        <p><strong>Lives System:</strong> Start with 3 lives. Wrong guesses cost 1 life, but correct guesses can win lives back.</p>
        <p><strong>Last Player Standing:</strong> Victory goes to whoever has lives remaining when their opponent is eliminated - pure survival gameplay.</p>
      </div>
    </div>
  </div>
</div>

<!-- Win Overlay -->
<div id="winOverlay" style="display:none;">
  <div class="overlayContent game-over-content">
    <button id="closeWinOverlayBtn" aria-label="Close win overlay">×</button>
    <h2 id="winTitleText"></h2>
    <p class="overlaySubtitle" id="winSubtitleText"></p>
    <div class="overlay-stats">
      <p class="overlayScore">Score: <span id="winScoreValue">0</span></p>
      <p class="overlayTime">Time: <span id="winTimeValue">00:00</span></p>
    </div>
    <div class="overlay-buttons">
      <button id="playAgainWinBtn">Play again</button>
      <button id="highscoreWinBtn">Highscore</button>
    </div>
  </div>
</div>

<!-- Highscore Overlay -->
<div id="highscoreOverlay" style="display:none;">
  <div class="overlayContent">
    <button id="closeHighscoreBtn" aria-label="Close highscore">×</button>
    <div class="highscore-tabs">
      <button class="tab-btn active" id="classicTab">Classic</button>
      <button class="tab-btn" id="infiniteTab">Infinite</button>
      <button class="tab-btn" id="speedTab">Panic</button>
      <button class="tab-btn" id="noMercyTab">No Mercy</button>
    </div>
    <div class="highscore-table">
      <div class="table-header">
        <div class="col-date"></div>
        <div class="col-score">Score</div>
        <div class="col-time">Time</div>
      </div>
      <div id="highscoreList"></div>
    </div>
    <div class="highscore-stats">
      <div class="stats-grid">
        <div class="stat-item">
          <span class="stat-value" id="totalGames">0</span>
          <span class="stat-label">Games Played</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="dayStreak">0</span>
          <span class="stat-label">Day Streak</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="totalWins">0</span>
          <span class="stat-label">Wins</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="winPercentage">0%</span>
          <span class="stat-label">Win Rate</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="avgScore">0</span>
          <span class="stat-label">Avg Score</span>
        </div>
        <div class="stat-item">
          <span class="stat-value" id="avgTime">0s</span>
          <span class="stat-label">Avg Time</span>
        </div>
      </div>
    </div>
    <div class="reset-links">
      <a href="#" id="resetHighscores">Reset Highscores</a>
      <a href="#" id="resetStatistics">Reset Statistics</a>
    </div>
  </div>
</div>

<!-- Settings Overlay -->
<div id="settingsOverlay" style="display:none;">
  <div class="overlayContent">
    <button id="closeSettingsBtn" aria-label="Close settings">×</button>
    <div class="settings-content">
      <div class="game-modes-section">
        <h2 class="game-modes-title">Game modes</h2>
        
        <!-- Hero Card - 2 Player Mode -->
        <div class="hero-card" id="twoPlayerHeroBtn">
          <div class="hero-content">
            <div class="hero-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
              </svg>
            </div>
            <div class="hero-text">
              <h3>2 Player Mode</h3>
              <p>Challenge a friend</p>
            </div>
          </div>
        </div>
        
        <!-- Game Modes Grid - 3 columns -->
        <div class="modes-grid">
          <div class="game-mode-item" id="classicModeBtn">
            <svg class="game-mode-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
              <line x1="8" y1="21" x2="16" y2="21"></line>
              <line x1="12" y1="17" x2="12" y2="21"></line>
            </svg>
            <span class="game-mode-name">CLASSIC</span>
            <span class="game-mode-desc">52 cards</span>
          </div>

          <div class="game-mode-item" id="speedModeBtn">
            <svg class="game-mode-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12,6 12,12 16,14"></polyline>
            </svg>
            <span class="game-mode-name">PANIC</span>
            <span class="game-mode-desc" id="panicModeDesc">12s rush</span>
          </div>
          <div class="game-mode-item" id="noMercyModeBtn">
            <span class="game-mode-icon-text">💀</span>
            <span class="game-mode-name">NO MERCY</span>
            <span class="game-mode-desc">1 mistake</span>
          </div>
        </div>
        
        <!-- Utility Row - 3 columns -->
        <div class="compact-utils-row">

          <button class="compact-util-btn" id="highscoreSettingsBtn">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
              <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
              <path d="M4 22h16"></path>
              <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
              <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
              <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
            <span>Highscores</span>
          </button>
          <button class="compact-util-btn" id="howToPlayBtn">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
              <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
            <span>Help</span>
          </button>
          <button class="compact-util-btn" id="infoBtn">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
            <span>Settings</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Help Overlay - IMPROVED RULES DESIGN -->
<div id="helpOverlay" style="display:none;">
  <div class="overlayContent">
    <button id="closeHelpOverlayBtn" aria-label="Close help">×</button>
    
    <!-- Huvudregler -->
    <div class="rules-main">
      <!-- Spelets mål -->
      <div class="rules-section">
        <h3 class="rules-section-title">
          <svg class="rules-section-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
            <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
            <path d="M4 22h16"></path>
            <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
            <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
            <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
          </svg>
          Game Objective
        </h3>
        <p>Predict whether the next card will be <strong>Higher</strong> or <strong>Lower</strong> than the current card. Clear all 9 piles or survive until the deck runs out to win!</p>
      </div>

      <!-- Hur man spelar -->
      <div class="rules-section">
        <h3 class="rules-section-title">
          <svg class="rules-section-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14,2 14,8 20,8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <polyline points="10,9 9,9 8,9"/>
          </svg>
          How to Play
        </h3>
        <div class="rules-steps">
          <div class="rules-step">
            <div class="step-number">1</div>
            <div class="step-content">
              <div class="step-title">Select a Card Pile</div>
              <div class="step-description">Click on any of the 9 cards to select it and reveal the guess buttons.</div>
            </div>
          </div>
          <div class="rules-step">
            <div class="step-number">2</div>
            <div class="step-content">
              <div class="step-title">Make Your Prediction</div>
              <div class="step-description">Choose Higher ▲ if you think the next card will have a higher value, or Lower ▼ for a lower value.</div>
            </div>
          </div>
          <div class="rules-step">
            <div class="step-number">3</div>
            <div class="step-content">
              <div class="step-title">Score Points</div>
              <div class="step-description">Correct guesses earn points and reveal a new card. Wrong guesses or equal values lose that pile.</div>
            </div>
          </div>
          <div class="rules-step">
            <div class="step-number">4</div>
            <div class="step-content">
              <div class="step-title">Win or Lose</div>
              <div class="step-description">Win by surviving until no cards remain, or lose when all 9 piles are eliminated.</div>
            </div>
          </div>
        </div>

        <!-- Action Buttons tillbaka inne i boxen -->
        <div class="rules-actions">
          <button class="rules-action-btn primary" id="playClassicBtn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="5,3 19,12 5,21"/>
            </svg>
            Start Playing
          </button>
          <button class="rules-action-btn gold" id="aboutGameModesBtn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
              <line x1="8" y1="21" x2="16" y2="21"></line>
              <line x1="12" y1="17" x2="12" y2="21"></line>
            </svg>
            Game Modes
          </button>
          <button class="rules-action-btn tutorial" id="startTutorialBtn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
            </svg>
            Tutorial
          </button>
        </div>
      </div>

      <!-- Pro Tips flyttad hit -->
      <div class="tips-section">
        <h3 class="tips-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
          Pro Tips
        </h3>
        <ul class="tips-list">
          <li><span class="tip-bullet">🃏</span><span class="tip-text">Remember that Aces are <strong>high</strong> (value 14), making them the highest cards.</span></li>
          <li><span class="tip-bullet">⚖️</span><span class="tip-text">Cards with equal value count as <strong>wrong guesses</strong> - plan accordingly!</span></li>
          <li><span class="tip-bullet">⚡</span><span class="tip-text">Enable Lazy Mode (↨ button) to show all guess buttons at once for faster gameplay.</span></li>
          <li><span class="tip-bullet">🧮</span><span class="tip-text">In Classic Mode, remember which cards have been played to calculate remaining probabilities.</span></li>
          <li><span class="tip-bullet">🛡️</span><span class="tip-text">Play conservatively - avoid risky guesses when you have many piles remaining to protect your progress.</span></li>
        </ul>
      </div>

      <!-- Kontroller -->
      <div class="rules-section">
        <h3 class="rules-section-title">
          <svg class="rules-section-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/>
            <line x1="8" y1="21" x2="16" y2="21"/>
            <line x1="12" y1="17" x2="12" y2="21"/>
          </svg>
          Game Controls
        </h3>
        <div class="controls-grid">
          <div class="control-item">
            <div class="control-icon">
              <span class="control-icon-text">↨</span>
            </div>
            <div class="control-content">
              <h4>Lazy Mode</h4>
              <p>Show guess buttons on all cards simultaneously for faster gameplay.</p>
            </div>
          </div>
          <div class="control-item">
            <div class="control-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3A7 7 0 0 0 21 12.79z"/>
              </svg>
            </div>
            <div class="control-content">
              <h4>Dark Mode</h4>
              <p>Toggle between light and dark themes for comfortable gaming.</p>
            </div>
          </div>
          <div class="control-item">
            <div class="control-icon">
              <span class="control-icon-text">↻</span>
            </div>
            <div class="control-content">
              <h4>Restart Game</h4>
              <p>Start a fresh game anytime with a new shuffled deck.</p>
            </div>
          </div>
          
          <div class="control-item">
            <div class="control-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
              </svg>
            </div>
            <div class="control-content">
              <h4>2 Player Mode</h4>
              <p>Challenge a friend in offline multiplayer battle modes.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 2 Player Mode Overlay -->
<div id="twoPlayerOverlay" style="display:none;">
  <div class="overlayContent">
    <button id="closeTwoPlayerBtn" aria-label="Close 2 player mode">×</button>
    
    <h2>2 Player Mode</h2>
    
    <!-- Battle Royale Hero - Clickable -->
    <div class="battle-royale-hero" id="battleRoyale2PBtn">
      <div class="battle-royale-content">
        <div class="battle-icon">⚔️</div>
        <h3>Battle Royale</h3>
        <p>Fight until only one remains</p>
      </div>
    </div>
    
    <!-- Divider -->
    <div class="divider-with-lines">
      Same deck, different skills
    </div>
    
    <!-- Fair Competition Modes -->
    <div class="competitive-modes">
      <!-- Classic - Full width -->
      <div class="classic-mode-full" id="classic2PBtn">
        <svg class="mode-icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
          <line x1="8" y1="21" x2="16" y2="21"></line>
          <line x1="12" y1="17" x2="12" y2="21"></line>
        </svg>
        <h4>Classic - 2 Player</h4>
        <p>52-card deck battle</p>
      </div>
      
      <!-- Panic + No Mercy row -->
      <div class="modes-row">
        <div class="mode-item" id="panic2PBtn">
          <svg class="mode-icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12,6 12,12 16,14"></polyline>
          </svg>
          <h4>Panic 2P</h4>
          <p>Time pressure</p>
        </div>
        
        <div class="mode-item" id="noMercy2PBtn">
          <div class="mode-icon-emoji">💀</div>
          <h4>No Mercy 2P</h4>
          <p>No second chances</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Classic 2 Player Mode Overlay -->
<div id="classic2POverlay" style="display:none;">
  <div class="overlayContent">
    <button id="closeClassic2PBtn" aria-label="Close classic 2P mode">×</button>
    <div class="classic-2p-content">
      <h2>Classic 2 Player</h2>
      <p class="overlaySubtitle">Battle for the highest score in fair card combat!</p>
      
      <div class="classic-2p-description">
        <div class="description-content">
          <p><strong>How it works:</strong></p>
          <ul>
            <li>Player 1 plays first with a shuffled deck</li>
            <li>Player 2 gets the exact same card sequence</li>
            <li>Scores remain hidden until both finish - highest score wins, no peeking!</li>
          </ul>
        </div>
      </div>
      
      <div class="overlay-buttons">
        <button id="startClassic2PBtn" class="classic-2p-start-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5,3 19,12 5,21"/>
          </svg>
          Start Game
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Panic 2 Player Mode Overlay -->
<div id="panic2POverlay" style="display:none;">
  <div class="overlayContent">
    <button id="closePanic2PBtn" aria-label="Close panic 2P mode">×</button>
    <div class="classic-2p-content">
      <h2>Panic 2 Player</h2>
      <p class="overlaySubtitle">Race against time in fair speed combat!</p>
      
      <div class="classic-2p-description">
        <div class="description-content">
          <p><strong>How it works:</strong></p>
          <ul>
            <li>Both players get the same deck and time limit</li>
            <li>Player 1 starts and plays until game ends, scoring as many points as possible before time runs out</li>
            <li>Time limit: <span id="panic2PTimerDisplay" style="font-weight: bold; color: #FFD700;">12s</span> (can be changed in settings)</li>
          </ul>
        </div>
      </div>
      
      <div class="overlay-buttons">
        <button id="startPanic2PBtn" class="classic-2p-start-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5,3 19,12 5,21"/>
          </svg>
          Start Speed Battle
        </button>
      </div>
    </div>
  </div>
</div>

<!-- No Mercy 2 Player Mode Overlay -->
<div id="noMercy2POverlay" style="display:none;">
  <div class="overlayContent">
    <button id="closeNoMercy2PBtn" aria-label="Close no mercy 2P mode">×</button>
    <div class="classic-2p-content">
      <h2>No Mercy 2 Player</h2>
      <p class="overlaySubtitle">One mistake ends everything - be perfect!</p>
      
      <div class="classic-2p-description">
        <div class="description-content">
          <p><strong>How it works:</strong></p>
          <ul>
            <li>Both players get the same deck sequence</li>
            <li>Player 1 starts and plays until game ends, one wrong guess ends immediately</li>
            <li>Scores remain hidden until both finish - highest score wins, no peeking!</li>
          </ul>
        </div>
      </div>
      
      <div class="overlay-buttons">
        <button id="startNoMercy2PBtn" class="classic-2p-start-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5,3 19,12 5,21"/>
          </svg>
          Start No Mercy Battle
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Battle Royale 2 Player Mode Overlay -->
<div id="battleRoyaleOverlay" style="display:none;">
  <div class="overlayContent">
    <button id="closeBattleRoyaleBtn" aria-label="Close battle royale mode">×</button>
    
    <!-- Main Title -->
    <h2 class="main-title">Battle Royale</h2>
    <p class="overlaySubtitle centered-text">Fight your friend offline in turn-based combat - last player standing wins!</p>
    
    <!-- Icon Grid Section -->
    <div class="icon-grid">
              <div class="icon-item">
          <div class="icon-symbol">♥</div>
          <div class="icon-text">3 Lives</div>
          <div class="icon-detail">At start</div>
        </div>
      <div class="icon-item">
        <div class="icon-symbol">❌</div>
        <div class="icon-text">Wrong</div>
        <div class="icon-detail">-1 Life</div>
      </div>
              <div class="icon-item">
          <div class="icon-symbol">👑</div>
          <div class="icon-text">Last</div>
          <div class="icon-detail">Wins</div>
        </div>
    </div>
    
    <!-- Strategy Examples Section -->
    <div class="card-strategies">
      <div class="strategy-item">
        <div class="strategy-header-row">
          <div class="strategy-cards">
            <div class="strategy-card red">J♥</div>
            <div class="strategy-card">Q♠</div>
            <div class="strategy-card red">K♦</div>
          </div>
          <div class="strategy-plus">+</div>
          <div class="strategy-action">
            Higher 
            <span class="arrow-up">
              <svg viewBox="0 0 24 24">
                <polygon points="12,6 18,18 6,18"/>
              </svg>
            </span>
          </div>
          <div class="strategy-result">= <span class="heart">♥</span> +1</div>
        </div>
      </div>
      
      <div class="strategy-item">
        <div class="strategy-header-row">
          <div class="strategy-cards">
            <div class="strategy-card">3♠</div>
            <div class="strategy-card red">4♦</div>
            <div class="strategy-card">5♣</div>
          </div>
          <div class="strategy-plus">+</div>
          <div class="strategy-action">
            Lower 
            <span class="arrow-down">
              <svg viewBox="0 0 24 24">
                <polygon points="6,6 18,6 12,18"/>
              </svg>
            </span>
          </div>
          <div class="strategy-result">= <span class="heart">♥</span> +1</div>
        </div>
      </div>
      
      <div class="strategy-item">
        <div class="strategy-header-row">
          <div class="strategy-cards">
            <div class="strategy-card">8♠</div>
          </div>
          <div class="strategy-plus">=</div>
          <div class="strategy-cards">
            <div class="strategy-card red">8♦</div>
          </div>
          <div class="strategy-action">Equal</div>
          <div class="strategy-result">= <span class="heart">♥</span> +1</div>
        </div>
      </div>
    </div>
    
    <!-- Start Button -->
    <button id="startBattleRoyaleBtn" class="start-btn">
      <span>⚔️</span>
      Start Battle Royale
    </button>
  </div>
</div>

<!-- Player 2 Ready Overlay -->
<div id="player2ReadyOverlay" style="display:none;">
  <div class="overlayContent">
    <div class="player2-ready-content">
      <h2 class="game-modes-title player2-title">Player 2's Turn</h2>
      
      <div class="player2-ready-info">
        <p>Player 1 has finished their turn.<br>Ready for Player 2?</p>
      </div>
      
      <div class="player2-ready-actions">
        <button class="player2-ready-btn" id="player2StartBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5,3 19,12 5,21"/>
          </svg>
          I'm Ready!
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Show Results Transition Overlay -->
<div id="showResultsOverlay" style="display:none;">
  <div class="overlayContent">
    <div class="show-results-content">
      <h2 class="game-modes-title">Game Complete!</h2>
      
      <div class="show-results-info">
        <p>Both players have finished their turns.<br>Let's see the results!</p>
      </div>
      
      <div class="show-results-actions">
        <button class="show-results-btn" id="showResultsBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/>
            <circle cx="12" cy="12" r="3"/>
          </svg>
          Who's the Winner?
        </button>
      </div>
    </div>
  </div>
</div>

<!-- 2 Player Results Overlay -->
<div id="twoPlayerResultsOverlay" style="display:none;">
  <div class="overlayContent">
    <div class="two-player-results-content">
      <h2 class="game-modes-title" id="winnerText">Winner is...</h2>
      
      <div class="results-comparison">
        <div class="player-result" id="player1Result">
          <div class="result-score" id="player1ResultScore">0</div>
          <div class="result-time" id="player1ResultTime">00:00</div>
          <h3>Player 1</h3>
        </div>
        
        <div class="player-result" id="player2Result">
          <div class="result-score" id="player2ResultScore">0</div>
          <div class="result-time" id="player2ResultTime">00:00</div>
          <h3>Player 2</h3>
        </div>
      </div>
      
      <div class="results-actions">
        <button class="results-play-again-btn" id="playAgain2PBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="23,4 23,10 17,10"/>
            <polyline points="1,20 1,14 7,14"/>
            <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
          </svg>
          Play again
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Battle Royale Results Overlay -->
<div id="battleRoyaleResultsOverlay" style="display:none;">
  <div class="overlayContent">
    <div class="battle-royale-results-content">
      <div class="victory-crown">👑</div>
      <h2 class="victory-title" id="battleRoyaleWinnerText">Player 1 Wins!</h2>
      <div class="victory-subtitle">VICTORY ROYALE</div>
      
      <div class="winner-display">
        <div class="winner-player" id="battleRoyaleWinnerPlayer">
          <div class="winner-name" id="battleRoyaleWinnerName">Player 1</div>
          <div class="winner-lives" id="battleRoyaleWinnerLives">♥ ♥ ♥</div>
        </div>
      </div>
      
      <div class="battle-results-actions">
        <button class="battle-rematch-btn" id="battleRoyaleRematchBtn">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="23,4 23,10 17,10"/>
            <polyline points="1,20 1,14 7,14"/>
            <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
          </svg>
          Rematch
        </button>
      </div>
    </div>
  </div>
</div>

<!-- partial -->
    <script src="script.js"></script>

</body>
</html>
